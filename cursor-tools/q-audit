#!/bin/bash

# Audit code using Amazon Q CLI
# Usage: q-audit "code here" [language]

if [ $# -eq 0 ]; then
    echo "Usage: q-audit \"code\" [language]"
    echo "Example: q-audit \"const password = '123456';\" javascript"
    exit 1
fi

CODE="$1"
LANGUAGE="${2:-}"

echo "üîç Auditing code..."
echo "----------------------------------------"

# Create audit prompt
if [ -n "$LANGUAGE" ]; then
    PROMPT="Please audit this $LANGUAGE code for security vulnerabilities, performance issues, and best practices:

\`\`\`$LANGUAGE
$CODE
\`\`\`"
else
    PROMPT="Please audit this code for security vulnerabilities, performance issues, and best practices:

\`\`\`
$CODE
\`\`\`"
fi

# Use Amazon Q CLI
q chat --no-interactive "$PROMPT"
